<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ใบเสร็จรับเงิน</title>

<style>
body{
  margin:0;
  font-family:Tahoma, sans-serif;
  background:#f3f3f3;
}
.container{
  max-width:480px;
  margin:auto;
  padding:16px;
}
.card{
  background:#fff;
  border-radius:16px;
  padding:16px;
  margin-bottom:16px;
}
h2,h3{
  text-align:center;
  margin-top:0;
}
.row{
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
  font-size:14px;
}
.total{
  font-size:18px;
  font-weight:bold;
}
.status{
  color:green;
  font-weight:bold;
}
img{
  width:100%;
  border-radius:12px;
  margin-top:10px;
}
button{
  width:100%;
  padding:14px;
  font-size:16px;
  border:none;
  border-radius:12px;
  background:#2ecc71;
  color:#fff;
}
</style>
</head>

<body>
<div class="container">

<h2>ใบเสร็จรับเงิน</h2>

<!-- ข้อมูลคำสั่งซื้อ -->
<div class="card">
  <div class="row">
    <span>เลขที่คำสั่งซื้อ</span>
    <span id="orderId"></span>
  </div>
  <div class="row">
    <span>วันที่ / เวลา</span>
    <span id="orderDate"></span>
  </div>
  <div class="row">
    <span>สถานะ</span>
    <span class="status" id="orderStatus"></span>
  </div>
</div>

<!-- ข้อมูลลูกค้า -->
<div class="card">
  <h3>ข้อมูลลูกค้า</h3>
  <div class="row">
    <span>ชื่อ</span>
    <span id="name"></span>
  </div>
  <div class="row">
    <span>เบอร์โทร</span>
    <span id="phone"></span>
  </div>
  <div class="row">
    <span>ที่อยู่</span>
    <span id="address"></span>
  </div>
</div>

<!-- รายการสินค้า -->
<div class="card">
  <h3>รายการสินค้า</h3>
  <div id="productList"></div>
  <hr>
  <div class="row total">
    <span>ยอดรวมทั้งหมด</span>
    <span>฿<span id="totalPrice"></span></span>
  </div>
</div>

<!-- การชำระเงิน -->
<div class="card">
  <h3>การชำระเงิน</h3>
  <div class="row">
    <span>วิธีชำระเงิน</span>
    <span id="paymentMethod"></span>
  </div>
  <img id="slipImage">
</div>

<button onclick="finishOrder()">เสร็จสิ้น</button>

</div>

<script>
/* ดึงข้อมูลจาก localStorage */
const cart = JSON.parse(localStorage.getItem("cart")) || [];
const order = JSON.parse(localStorage.getItem("orderInfo")) || {};

/* เลขคำสั่งซื้อ */
const orderId = order.orderId || "ORD" + Date.now();
document.getElementById("orderId").innerText = orderId;

/* วันที่ */
document.getElementById("orderDate").innerText =
  new Date().toLocaleString("th-TH");

/* สถานะ */
document.getElementById("orderStatus").innerText =
  order.status || "ชำระเงินเรียบร้อย";

/* ข้อมูลลูกค้า */
document.getElementById("name").innerText =
  order.name || "-";
document.getElementById("phone").innerText =
  order.phone || "-";
document.getElementById("address").innerText =
  order.address || "-";

/* รายการสินค้า */
let total = 0;
const productList = document.getElementById("productList");

cart.forEach(item=>{
  const sum = item.price * item.qty;
  total += sum;

  productList.innerHTML += `
    <div class="row">
      <span>${item.name} x ${item.qty}</span>
      <span>฿${sum.toLocaleString()}</span>
    </div>
  `;
});

document.getElementById("totalPrice").innerText =
  total.toLocaleString();

/* วิธีชำระเงิน */
document.getElementById("paymentMethod").innerText =
  order.payment || "โอนเงินผ่านธนาคาร";

/* แสดงสลิป */
if(order.slip){
  document.getElementById("slipImage").src = order.slip;
}

/* ปุ่มเสร็จสิ้น */
  function finishOrder(){
  localStorage.clear();
  alert("ขอบคุณสำหรับการสั่งซื้อค่ะ ");
  window.location.href = "index1.html";
}
</script>
<script>
  // ดึงข้อมูลจาก localStorage
  document.getElementById("name").innerText =
    localStorage.getItem("customerName") || "-";

  document.getElementById("phone").innerText =
    localStorage.getItem("customerPhone") || "-";

  document.getElementById("address").innerText =
    localStorage.getItem("customerAddress") || "-";
</script>
</body>
</html>